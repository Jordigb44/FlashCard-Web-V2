<!DOCTYPE html>
<html lang="es">

<head>
    <title>Memo Mate</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/detalle.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</head>

<body class="bg-light p-4" style="background-color: #FFAF9D !important;">

    <header class="text-center py-4">
        <nav>
            <img src="/images/header.jpeg" class="img-fluid" alt="Logo">
        </nav>
    </header>
    {{#preguntas}}
    <div class="container mt-4">
        <div class="row justify-content-center m-0 p-0">
            <div class="col-md-4 text-center mb-4 h-auto w-auto">
                <a href="/" class="btn btn-primary btn-sm d-flex align-items-center  h-auto w-auto">
                    <img src="/images/home.png" alt="Home Icon" class="img-fluid" style="width: 25px; height: 25px;">
                    <h1 class="ms-2 fs-4 m-0">Ver todas</h1>
                </a>
            </div>
            <div class="col-md-4 text-center mb-4 h-auto w-auto m-0 p-0">
                <form action="/edit/{{id}}" method="get">
                    <button type="submit" class="btn btn-danger btn-sm d-flex align-items-center h-auto w-auto">
                        <img src="/images/edit.png" alt="Edit Icon" class="img-fluid"
                            style="width: 25px; height: 25px;">
                        <h1 class="ms-2 fs-4 m-0">Editar</h1>
                    </button>
                </form>
            </div>
            <div class="col-md-4 text-center mb-4 h-auto w-auto m-0 p-0">
                <form action="/delete/{{id}}" method="post">
                    <button type="submit" class="btn btn-danger btn-sm d-flex align-items-center h-auto w-auto">
                        <img src="/images/trash.png" alt="Trash Icon" class="img-fluid"
                            style="width: 25px; height: 25px;">
                        <h1 class="ms-2 fs-4 m-0">Eliminar</h1>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <section class="container mt-4" id="container_pregunta">

        <div class="row">
            <div class="col-12">
                <div class="grid_flashcard">
                    <div class="item_pregunta w-auto h-auto align-content-md-center m-2 pt-4"
                        style="word-wrap: break-word; overflow: hidden; text-overflow: ellipsis;">
                        <h1 class="h-auto w-auto text-center mb-0">{{pregunta}}</h1>
                        <div
                            class="d-flex flex-column flex-md-row justify-content-sm-center text-white fw-bolder mt-0 pt-3">
                            <h3 class="text-center pe-5 fs-1 mb-0">Tema - {{tema}}</h3>
                            <h3 class="text-center fs-1">Dificultad {{dificultad}}</h3>
                        </div>
                    </div>
                    <div class="item_imagen text-center w-auto h-auto align-content-md-center p-3">
                        <img src="{{{imagen_pregunta_url}}}" alt="Imagen" class="img-fluid"
                            style="width: 250pt; height: 250pt; border-radius: 20px;">
                    </div>
                    <div class="item_pregunta w-auto h-auto align-content-md-center m-2 pt-4"
                        style="word-wrap: break-word; overflow: hidden; text-overflow: ellipsis;">
                        <h1 class="h-auto w-auto text-center mb-0">COMENTARIOS: </h1>
                        <div
                            class="d-flex flex-column flex-md-row justify-content-center align-items-center align-content-center text-white fw-bolder mt-0 pt-3">
                            <h3 class="text-center pe-5 fs-1 mb-0 text-break">{{comentarios}}</h3>
                        </div>
                        <div id="formulario-container">
                            <form action="/addComentario/{{id}}" method="post" id="miFormulario">
                                <label for="comentario">Comentario:</label>
                                <input name="ComentarioNuevo" type="text" id="comentario" required>
                                <input type="submit" value="Agregar Comentario">
                            </form>
                        </div>
                        <a href="/respuesta/{{id}}"
                            class="btn btn-primary btn-sm d-flex justify-content-center align-items-center align-content-center h-auto w-30% mx-auto"
                            style="background-color: #FFAF9D ;color: white; font-size: 16px; border-color: #FFAF9D; width: fit-content; border-radius: 10%; margin-bottom: 20px;">
                            <img src="/images/add.png" alt="Add Icon" class="img-fluid"
                                style="width: 25px; height: 25px;">
                            <h1 class="ms-2 fs-9 m-0" style="text-align: center;">Respuesta</h1>
                        </a>
                    </div>
                </div>
            </div>
        </div>

    </section>

    <script>
        function guardarEditComentario() {
            var id = id;
            var comentarios = document.getElementById('comentario').value;

            // Crear un formulario din√°mico para enviar los datos al servidor
            var form = document.createElement('form');
            form.action = '/actualizarPregunta/{{id}}';  // Reemplaza con la URL correcta
            form.method = 'POST'
            // Crear campos de formulario y agregarlos al formulario
            var campos = {
                comentarios: comentarios
            };

            for (var key in campos) {
                var input = document.createElement('input');
                input.type = 'hidden';
                input.name = key;
                input.value = campos[key];
                form.appendChild(input);
            }

            // Agregar el formulario al cuerpo del documento y enviarlo
            document.body.appendChild(form);
            form.submit();
        }
    </script>


    {{/preguntas}}
</body>

</html>